<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Souvenir Scolaire ‚Äî {{ eleve.nom }}</title>

<style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      font-family: 'Inter', sans-serif;
      color: #1a1a1a;
    }
  
    /* Pour PDF : taille A4 et marges z√©ro */
    @page {
      size: A4;
      margin: 0;
    }
  
    /* =========================
       PAGE 1 : Couverture
       ========================= */
    .cover {
      position: relative;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      overflow: hidden;
      page-break-after: always; /* Passe √† la page suivante pour PDF */
    }
  
    /* Logos coins */
    .top-left, .top-right {
      position: absolute;
      top: 20px;
    }
    .top-left { left: 20px; }
    .top-right { right: 20px; }
  
    .top-left img, .top-right img {
      width: 70px;
      height: 70px;
      object-fit: cover;
      border-radius: 12px;
      border: 2px solid white;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    }
  
    /* Contenu central */
    .center-content {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      flex-grow: 1;
      text-align: center;
      padding: 0 20px;
      text-shadow: 0 3px 12px rgba(0,0,0,0.6);
    }
  
    .center-content h1 {
      font-family: 'Playfair Display', serif;
      font-size: 42px;
      font-weight: 700;
      margin: 0;
    }
    .center-content .year {
      font-size: 26px;
      font-weight: 600;
      margin-top: 8px;
    }
    .center-content .slogan {
      font-family: 'Playfair Display', serif;
      font-size: 36px;
      font-weight: 800;
      margin-top: 16px;
      line-height: 1.3;
    }
  
    /* Texte bas page couverture */
    .bottom {
      text-align: center;
      padding: 24px 16px;
      font-size: 16px;
      line-height: 1.4;
    }
    .bottom .main-text {
      margin-bottom: 12px;
      font-style: italic;
    }
    .bottom .note {
      font-weight: 600;
    }
  
    /* =========================
       PAGE 2 : Pr√©sentation √©cole
       ========================= */
    .presentation-page {
      width: 100%;
      padding: 40px 30px;
      box-sizing: border-box;
      font-family: 'Inter', sans-serif;
      background: #fdfdfd;
      color: #1a1a1a;
      page-break-before: always; /* Nouvelle page PDF */
    }
  
    .presentation-page .section-head {
      display: flex;
      align-items: center;
      margin-bottom: 24px;
    }
  
    .presentation-page .section-head .marker {
      width: 6px;
      height: 40px;
      background-color: #1a365d;
      margin-right: 12px;
      border-radius: 3px;
    }
  
    .presentation-page .section-head h2 {
      font-size: 28px;
      color: #1a365d;
      margin: 0;
    }
  
    .row {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
    }
  
    .col {
      flex: 1;
      min-width: 300px;
    }
  
    .col-left .presentation-image {
      width: 100%;
      height: 220px;
      border-radius: 10px;
      background-size: cover;
      background-position: center;
      margin-bottom: 16px;
    }
  
    .col-left h3 {
      font-size: 22px;
      color: #1a365d;
      margin-top: 16px;
      margin-bottom: 12px;
    }
  
    .col-left p {
      font-size: 16px;
      line-height: 1.6;
      margin-bottom: 12px;
    }
  
    .col-right h4 {
      font-size: 20px;
      color: #1a365d;
      margin-top: 16px;
      margin-bottom: 6px;
    }
  
    .col-right p {
      font-size: 16px;
      line-height: 1.6;
      margin-bottom: 12px;
    }
  
    .gallery {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 14px;
    }
  
    .gallery .img {
      width: calc(33% - 6.66px);
      height: 100px;
      border-radius: 8px;
      background-size: cover;
      background-position: center;
    }
  
  
    
  </style>
</head>

<body>
    {% load static %}
<section class="page cover-page" aria-label="Couverture">

    <!-- Logo √âcole -->
    <div class="corner-logo">
        {% if info and info.logo %}
            <img src="{{ info.logo.url }}" alt="Logo √©cole">
        {% else %}
            <img src="{{ default_logo }}" alt="Logo √©cole">
        {% endif %}
    </div>

    <!-- Drapeau -->
    <div class="corner-flag">
        <img src="{{ country_flag_url }}" alt="Drapeau">
    </div>

    <!-- Titre -->
    <h1 class="magazine-title">
        SOUVENIR SCOLAIRE
    </h1>

    <!-- HERO IMAGE = PHOTO DE L'√âL√àVE -->
    <div class="cover-hero"
        {% if eleve.photo_entiere %}
            style="background-image:url('{{ eleve.photo_entiere.url }}');"
        {% else %}
            style="background-image:url('{{ default_photo }}');"
        {% endif %}
    >
        <div class="hero-overlay"></div>
    </div>

    <!-- contenu -->
    <div class="cover-left">

        <!-- Nom & Classe -->
        <div class="school-main-info">
            <div class="school-title">{{ eleve.nom }}</div>

            <div class="school-year">
                Classe :
                <span class="year-highlight">
                    {{ eleve.classe.nom }}
                </span>
            </div>
        </div>

        <!-- Logos et badges -->
        <div class="badge-row">
            <div class="badge badge-rdc">RDC</div>
            <div class="badge badge-promo">
                √âcole : {{ school.nom }}
            </div>
        </div>

        <div class="intro-text">
            <p class="muted-note">
                Souvenir personnalis√© retra√ßant le parcours scolaire de l‚Äô√©l√®ve,
                ses professeurs, sa classe et les moments marquants de l‚Äôann√©e.
            </p>
        </div>

        {% if info and info.slogan %}
        <div class="school-slogan">
            <span class="slogan-quote">¬´</span> {{ info.slogan }} <span class="slogan-quote">¬ª</span>
        </div>
        {% endif %}
    </div>

    <!-- Pied de page -->
    <div class="cover-footer">
        <span class="production-text">Production School Note</span>
        <span class="website-link">schoolnote.com</span>
    </div>

</section>
<style>
    /* üîë Polices PDF */
    @font-face {
        font-family: 'Playfair Display';
        src: url('file://{{ base_dir }}/static/fonts/PlayfairDisplay-Bold.ttf') format('truetype');
        font-weight: 700;
    }
    @font-face {
        font-family: 'Lato';
        src: url('file://{{ base_dir }}/static/fonts/Lato-Regular.ttf') format('truetype');
        font-weight: 400;
    }
    @font-face {
        font-family: 'Lato';
        src: url('file://{{ base_dir }}/static/fonts/Lato-Bold.ttf') format('truetype');
        font-weight: 700;
    }
    
    /* PAGE */
    .cover-page {
        display: block;
        width: 100%;
        height: 100%;
        position: relative;
        page-break-after: always;
        font-family: 'Lato', sans-serif;
        background-color: #f7f7f7;
    }
    
    /* TITRE */
    .magazine-title {
        position: absolute;
        top: 50px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 10;
        font-family: 'Playfair Display', serif;
        font-size: 40px;
        font-weight: 700;
        color: #fff;
        letter-spacing: 5px;
        text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        text-align: center;
        width: 80%;
    }
    
    /* LOGO & DRAPEAU DANS LES COINS */
    .corner-logo, .corner-flag {
        position: absolute;
        top: 20px;
        z-index: 20;
    }
    .corner-logo { left: 20px; }
    .corner-flag { right: 20px; }
    
    .corner-logo img, .corner-flag img {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        object-fit: cover;
        border: 3px solid #fff;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    
    /* HERO IMAGE = PHOTO ENTI√àRE DE L'√âL√àVE */
    .cover-hero {
        width: 100%;
        height: 100%;
        position: absolute;
        background-size: cover;
        background-position: top center;
        filter: grayscale(10%) brightness(0.9);
        z-index: 1;
    }
    
    .hero-overlay {
        content: '';
        position: absolute;
        inset: 0;
        background: rgba(26, 54, 93, 0.65); /* bleu fonc√© semi-transp */
    }
    
    /* CONTENU √Ä GAUCHE */
    .cover-left {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        left: 0;
        width: 100%;
        padding: 60px;
        box-sizing: border-box;
        z-index: 5;
        color: white;
    }
    
    /* Infos √©l√®ve */
    .school-main-info {
        margin-bottom: 25px;
    }
    .school-title {
        font-family: 'Playfair Display', serif;
        font-size: 5rem;
        font-weight: 700;
        color: white;
        line-height: 1;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.6);
    }
    .school-year {
        font-size: 1.4rem;
        margin-top: 10px;
        color: #eee;
    }
    .year-highlight {
        font-weight: 700;
        color: #d4af37;
    }
    
    /* Badges */
    .badge-row {
        display: flex;
        gap: 12px;
        margin-top: 20px;
    }
    .badge {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        padding: 8px 15px;
        border-radius: 20px;
        font-size: 13px;
        border: 1px solid rgba(255, 255, 255, 0.4);
        font-weight: 700;
        text-transform: uppercase;
    }
    
    /* Texte intro */
    .intro-text {
        margin-top: 40px;
        max-width: 60%;
        padding-bottom: 20px;
    }
    .muted-note {
        font-size: 1.1rem;
        line-height: 1.6;
        color: #d4af37 !important;
        font-weight: 700 !important;
        text-shadow: 1px 1px 3px rgba(0,0,0,1);
    }
    
    /* Slogan */
    .school-slogan {
        margin-top: 30px;
        font-size: 1.8rem;
        font-weight: 700;
        color: white;
        font-family: "Playfair Display", serif;
    }
    .slogan-quote {
        font-size: 2.5rem;
        color: #d4af37;
    }
    
    /* Footer */
    .cover-footer {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 10;
        display: flex;
        gap: 15px;
        font-size: 0.8rem;
        color: #ccc;
    }
    .production-text {
        letter-spacing: 0.5px;
    }
    .website-link {
        color: #d4af37;
        font-weight: 700;
        text-decoration: none;
    }
    </style>
    
<!-- =========================
     PAGE 2 : Pr√©sentation √©cole
     ========================= -->
     <section class="page presentation-page" aria-label="Pr√©sentation de l'√©cole">
        <div class="section-head">
            <div class="marker"></div>
            <h2>Pr√©sentation de l'√©cole</h2>
        </div>
    
        <div class="row">
            <!-- Colonne gauche : image principale + pr√©sentation + galerie -->
            <div class="col col-left">
                {% if info.image_principale %}
                    <div class="presentation-image" 
                         style="background-image:url('{{ info.image_principale.url }}');"></div>
                {% endif %}
    
                <h3>{{ school.nom }} ‚Äî {% if info %}Ann√©e scolaire {{ info.annee_scolaire }}{% endif %}</h3>
    
                {% if info.presentation %}
                    <p>{{ info.presentation }}</p>
                {% endif %}
    
                
                {% if info.photos.exists %}
<div class="gallery">
    {% for photo in info.photos.all %}
        <div class="img"
             style="background-image: url('{{ media_url }}{{ photo.image }}');"
             title="{{ photo.caption|default:'Photo scolaire' }}">
        </div>
    {% endfor %}
</div>
{% else %}
<p style="color: #777;">Aucune image dans la galerie.</p>
{% endif %}


            </div>
    
            <!-- Colonne droite : mission / valeurs / remerciements -->
            <div class="col col-right">
                {% if info.mission %}
                    <h4>Mission</h4>
                    <p>{{ info.mission }}</p>
                {% endif %}
                {% if info.valeurs %}
                    <h4>Valeurs</h4>
                    <p>{{ info.valeurs }}</p>
                {% endif %}
                {% if info.remerciements %}
                    <h4>Remerciements</h4>
                    <p>{{ info.remerciements }}</p>
                {% endif %}
            </div>
        </div>
    </section>
    
    <style>
    /* Galerie */
    .gallery {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 14px;
    }
    .gallery .img {
        width: calc(33% - 6.66px);
        height: 100px;
        border-radius: 8px;
        background-size: cover;
        background-position: center;
    }
    </style>
   
<!-- =========================
     PAGE 3: FONDATEUR
     ========================= -->
     <section class="page fondateur-page" aria-label="Fondateur">
        <div class="section-head">
            <div class="marker"></div>
            <h2>Pr√©sentation du Fondateur</h2>
        </div>
    
        <div class="row fondateur-row">
            {% for fondateur in school.fondateurs.all %}
            
            <!-- Colonne gauche : photo + nom + r√¥le + vision -->
            <div class="col col-left" style="max-width:260px; text-align:center;">
                <div class="fondateur-info">
                    {% if fondateur.photo_profil %}
                        <div class="avatar" style="background-image:url('{{ fondateur.photo_profil.url }}'); width:120px; height:120px; border-radius:999px; margin:0 auto;"></div>
                    {% else %}
                        <div class="avatar" style="background-image:url('{{ default_fondateur }}'); width:120px; height:120px; border-radius:999px; margin:0 auto;"></div>
                    {% endif %}
    
                    <div style="margin-top:12px;">
                        <div style="font-weight:700; font-size:16px;">{{ fondateur.nom_complet }}</div>
                        <div class="muted-note3" style="font-size:14px;">Fondateur & Directeur</div>
                        
                        {% if fondateur.vision %}
                            <h4 style="margin-top:12px; font-size:16px; color:#1a365d;">Vision</h4>
                            <div style="font-size:14px; font-style:italic; color:#555; margin-top:4px;">
                                {{ fondateur.vision }}
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
    
            <!-- Colonne droite : Biographie / Message -->
            <div class="col col-right">
                {% if fondateur.biographie %}
                    <h4>Biographie</h4>
                    <p>{{ fondateur.biographie }}</p>
                {% endif %}
                {% if fondateur.message_annee %}
                    <h4>Message pour l'ann√©e</h4>
                    <p>{{ fondateur.message_annee }}</p>
                {% endif %}
            </div>
    
            {% empty %}
                <p style="color:#777;">Aucun fondateur enregistr√© pour cette √©cole.</p>
            {% endfor %}
        </div>
    </section>
    
    <style>
    /* Page Fondateur */
    .fondateur-page {
        padding: 40px 30px;
        box-sizing: border-box;
        background: #fdfdfd;
        color: #1a1a1a;
        page-break-before: always;
    }
    
    .fondateur-page .section-head {
        display: flex;
        align-items: center;
        margin-bottom: 24px;
        break-inside: avoid;
    }
    
    .fondateur-page .section-head .marker {
        width: 6px;
        height: 40px;
        background-color: #1a365d;
        margin-right: 12px;
        border-radius: 3px;
    }
    
    .fondateur-page .section-head h2 {
        font-size: 28px;
        color: #1a365d;
        margin: 0;
    }
    
    .fondateur-row {
        display: flex;
        flex-wrap: wrap;
        gap: 30px;
        break-inside: avoid;
    }
    
    .col-left .avatar {
        background-size: cover;
        background-position: center;
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    
    .col-left h4 {
        margin-top: 12px;
        font-size: 16px;
        color: #1a365d;
    }
    
    .col-right h4 {
        font-size: 20px;
        color: #1a365d;
        margin-top: 16px;
        margin-bottom: 6px;
    }
    
    .col-right p {
        font-size: 16px;
        line-height: 1.6;
        margin-bottom: 12px;
    }
    </style>
    
<!-- =========================
    <!-- =========================
     PAGE 4: SUPERVISEURS
     ========================= -->
<section class="page superviseur-page" aria-label="Superviseurs">
    <div class="section-head">
        <div class="marker"></div>
        <h2>Superviseurs & Comit√© de direction</h2>
    </div>

    <!-- Texte explicatif -->
    <p class="intro-text">
        Cette section pr√©sente les membres cl√©s de la direction de l'√©tablissement pour l'ann√©e scolaire en cours : directeurs, pr√©fets, responsables de discipline et autres superviseurs.
    </p>

    <div class="cards">
        {% for sup in school.superviseurs.all %}
        <div class="card">
            {% if sup.superviseur.profile_pic %}
                <div class="avatar" style="background-image:url('{{ sup.superviseur.profile_pic.url }}');"></div>
            {% else %}
                <div class="avatar" style="background-image:url('https://bootdey.com/img/Content/avatar/avatar7.png');"></div>
            {% endif %}

            <div class="name">{{ sup.superviseur.get_full_name|default:sup.superviseur.email }}</div>
            {% if sup.superviseur.role %}
                <div class="role">{{ sup.superviseur.role }}</div>
            {% endif %}
        </div>
        {% empty %}
            <p style="color:#777;">Aucun superviseur enregistr√© pour cette √©cole.</p>
        {% endfor %}
    </div>
</section>

<style>
/* Page Superviseurs */
.superviseur-page {
    padding: 40px 30px;
    box-sizing: border-box;
    background: #fdfdfd;
    color: #1a1a1a;
    page-break-before: always;
}

.superviseur-page .section-head {
    display: flex;
    align-items: center;
    margin-bottom: 12px;
    break-inside: avoid;
}

.superviseur-page .section-head .marker {
    width: 6px;
    height: 40px;
    background-color: #1a365d;
    margin-right: 12px;
    border-radius: 3px;
}

.superviseur-page .section-head h2 {
    font-size: 28px;
    color: #1a365d;
    margin: 0;
}

/* Texte introductif */
.superviseur-page .intro-text {
    margin: 12px 0 24px 0;
    font-size: 16px;
    color: #333;
    line-height: 1.5;
    max-width: 700px;
}

/* Cartes des superviseurs */
.cards {
    display: flex;
    flex-wrap: wrap;
    gap: 24px;
    margin-top: 20px;
}

.card {
    width: 200px;
    text-align: center;
    padding: 16px;
    border-radius: 12px;
    background: #f8f8f8;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    break-inside: avoid;
}

.card .avatar {
    width: 120px;
    height: 120px;
    border-radius: 999px;
    background-size: cover;
    background-position: center;
    margin: 0 auto 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

.card .name {
    font-weight: 700;
    font-size: 16px;
    margin-bottom: 4px;
}

.card .role {
    font-size: 14px;
    color: #555;
    font-style: italic;
}
</style>

<!-- =========================
     PAGE 5: CORPS DES ENSEIGNANTS
     ========================= -->
     <!-- =========================
  <!-- PAGE 5: CORPS DES ENSEIGNANTS -->
<section class="page teachers-page" aria-label="Corps Enseignant">

    <div class="section-head">
        <div class="marker"></div>
        <h2>Corps Enseignant</h2>
    </div>

    <p class="teachers-intro">
        Voici les enseignants qui encadrent les classes de cette √©cole durant l'ann√©e scolaire.
    </p>

    <div class="teachers-list">
        {% for prof in enseignants %}
        <div class="teacher-card">

            <div class="teacher-avatar">
                {% if prof.profile_pic %}
                    <img src="{{ prof.profile_pic.url }}" alt="">
                {% else %}
                    <img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="">
                {% endif %}
            </div>

            <p class="teacher-name">{{ prof.get_full_name|default:prof.email }}</p>

            {% if prof.role %}
            <p class="teacher-role">{{ classe.titulaire.bio|truncatewords:30 }}</p>
            {% endif %}

        </div>
        {% empty %}
        <p class="no-teachers">Aucun enseignant enregistr√© pour cette √©cole.</p>
        {% endfor %}
    </div>

</section>


<style>
/* --- PAGE CONTAINER --- */
.teachers-page {
    padding: 40px 30px;
    background: #fdfdfd;
    color: #1a1a1a;
    page-break-before: always;
}

/* Titre & Marker (identique superviseurs) */
.teachers-page .section-head {
    display: flex;
    align-items: center;
    margin-bottom: 12px;
}

.teachers-page .section-head .marker {
    width: 6px;
    height: 40px;
    background-color: #1a365d;
    margin-right: 12px;
    border-radius: 3px;
}

.teachers-page .section-head h2 {
    font-size: 28px;
    color: #1a365d;
    margin: 0;
}

/* Texte introductif avec marge (corrige le probl√®me du texte coll√© au bord) */
.teachers-intro {
    margin: 15px 0 25px 0;
    font-size: 16px;
    color: #333;
    line-height: 1.5;
    max-width: 700px;
}

/* --- GRID ENSEIGNANTS (comme √©l√®ves) --- */
.teachers-list {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 20px; /* tu peux ajuster l'espacement */
}


/* --- CARD --- */
.teacher-card {
    text-align: center;
    break-inside: avoid;
    padding: 10px;
    background: #f8f8f8;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    transition: 0.2s;
}

.teacher-card:hover {
    transform: translateY(-3px);
}

/* Avatar identique √† celui des √©l√®ves */
.teacher-avatar {
    width: 80px;
    height: 80px;
    margin: auto;
    border-radius: 50%;
    border: 2px solid #eee;
    padding: 3px;
    overflow: hidden;
}

.teacher-avatar img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
}

/* Nom */
.teacher-name {
    margin-top: 8px;
    font-size: 0.95rem;
    font-weight: 700;
}

/* R√¥le */
.teacher-role {
    font-size: 0.8rem;
    color: #777;
    font-style: italic;
    margin-top: 2px;
}

.no-teachers {
    color: #888;
}

/* --- Responsive --- */
@media (max-width: 768px) {
    .teachers-list {
        grid-template-columns: repeat(3, 1fr);
    }
}

/* --- Print --- */
@media print {
    .teachers-list {
        grid-template-columns: repeat(5, 1fr) !important;
    }
}
</style>

    
      {% load static %}

      <section class="page class-detail-page">
      
          <!-- HEADER SECTION -->
          <header class="class-detail-header">
              <div class="header-left">
                  <h1 class="class-name">{{ classe.nom }}</h1>
      
                  <p class="class-small-info">
                      Ann√©e scolaire :
                      <span>{{ info.annee_scolaire }}</span>
                  </p>
              </div>
      
              <div class="header-right">
                  <span class="header-badge">{{ classe.eleves.count }} √©l√®ves</span>
              </div>
          </header>
      
          <!-- PHOTO DE CLASSE -->
          <div class="class-photo-wrapper">
              <img 
                  src="{% if classe.photo_classe %}{{ classe.photo_classe.url }}{% else %}{{ default_photo }}{% endif %}" 
                  alt="Photo de la classe"
                  class="class-photo"
              >
          </div>
      
          <!-- CONTENU PRINCIPAL -->
          <div class="detail-grid">
      
              <!-- SIDEBAR -->
              <aside class="detail-sidebar">
      
                  <!-- PROFESSEUR TITULAIRE -->
                  {% if classe.titulaire %}
                  <div class="teacher-box">
                      <h3 class="box-title">Professeur Titulaire</h3>
      
                      <div class="teacher-profile">
                          <div class="teacher-avatar">
                              {% if classe.titulaire.profile_pic %}
                                  <img src="{{ classe.titulaire.profile_pic.url }}" alt="">
                              {% else %}
                                  <img src="{% static 'img/fondateur.jpg' %}" alt="">
                              {% endif %}
                          </div>
      
                          <div class="teacher-info">
                              <h4>{{ classe.titulaire.get_full_name|default:classe.titulaire.email }}</h4>
                              <p class="teacher-role">Responsable de la classe</p>
      
                              {% if classe.titulaire.telephone %}
                                  <p class="teacher-contact">üìû {{ classe.titulaire.telephone }}</p>
                              {% endif %}
                          </div>
                      </div>
      
                      {% if classe.titulaire.bio %}
                      <p class="teacher-bio">
                          {{ classe.titulaire.bio|truncatewords:30 }}
                      </p>
                      {% endif %}
                  </div>
                  {% endif %}
      
                  <!-- MOT DES √âL√àVES -->
                  {% if classe.mot_des_eleves %}
                  <div class="class-quote-box">
                      <h3 class="box-title">Mot des √âl√®ves</h3>
                      <p class="quote-text">‚Äú{{ classe.mot_des_eleves }}‚Äù</p>
                  </div>
                  {% endif %}
      
              </aside>
      
              <!-- LISTE DES √âL√àVES -->
              <section class="students-box">
                  <h3 class="box-title">Liste des √âl√®ves</h3>
      
                  <div class="students-list">
                      {% for e in classe.eleves.all %}
                          {% if e.is_active %}
                          <div class="student-card">
                              <div class="student-avatar">
                                  {% if e.image_profil %}
                                      <img src="{{ e.image_profil.url }}" alt="">
                                  {% else %}
                                      <img src="{{ default_photo }}" alt="">
                                  {% endif %}
                              </div>
      
                              <p class="student-name">{{ e.nom }}</p>
                          </div>
                          {% endif %}
                      {% empty %}
                          <p class="no-students">Aucun √©l√®ve enregistr√© pour cette classe.</p>
                      {% endfor %}
                  </div>
              </section>
      
          </div>
      
      </section>
      
      <style>
          /* --------- BASE --------- */
          .class-detail-page {
              padding: 40px;
              font-family: "Lato", sans-serif;
              background: #ffffff;
              color: #222;
          }
          
          /* --------- HEADER --------- */
          .class-detail-header {
              display: flex;
              justify-content: space-between;
              align-items: center;
              margin-bottom: 35px;
              border-bottom: 2px solid #eee;
              padding-bottom: 15px;
          }
          .class-name {
              font-size: 3rem;
              margin: 0;
              font-family: "Playfair Display", serif;
          }
          .class-small-info span {
              color: #1a365d;
              font-weight: 700;
          }
          .header-badge {
              background: #1a365d;
              color: white;
              padding: 7px 15px;
              border-radius: 20px;
              font-weight: 700;
          }
          
          /* --------- PHOTO --------- */
          .class-photo-wrapper {
              width: 100%;
              height: 300px;
              overflow: hidden;
              border-radius: 8px;
              margin-bottom: 35px;
              border: 3px solid #d4af37;
          }
          .class-photo {
              width: 100%;
              height: 100%;
              object-fit: cover;
          }
          
          /* --------- GRID PRINCIPALE --------- */
          .detail-grid {
              display: grid;
              grid-template-columns: 300px 1fr;
              gap: 40px;
          }
          
          /* --------- SIDEBAR --------- */
          .detail-sidebar .box-title {
              font-family: "Playfair Display", serif;
              font-size: 1rem;
              text-transform: uppercase;
              margin-bottom: 10px;
              letter-spacing: 1px;
              color: #1a365d;
          }
          
          /* PROF */
          .teacher-box {
              border: 1px solid #eee;
              padding: 20px;
              border-radius: 10px;
          }
          .teacher-profile {
              display: flex;
              gap: 15px;
              align-items: center;
              margin-bottom: 10px;
          }
          .teacher-avatar img {
              width: 70px;
              height: 70px;
              border-radius: 50%;
              object-fit: cover;
              border: 2px solid #d4af37;
          }
          .teacher-info h4 {
              margin: 0;
              font-size: 1rem;
              font-weight: 700;
          }
          .teacher-role {
              margin: 0;
              font-size: 0.85rem;
              color: #777;
          }
          .teacher-contact {
              margin: 5px 0 0 0;
          }
          .teacher-bio {
              margin-top: 10px;
              font-size: 0.87rem;
              color: #444;
              line-height: 1.5;
          }
          
          /* MOT DES ELEVE */
          .class-quote-box {
              margin-top: 25px;
              padding: 20px;
              border-left: 4px solid #d4af37;
              background: #fafafa;
              border-radius: 6px;
          }
          .quote-text {
              font-family: "Playfair Display", serif;
              font-style: italic;
              color: #555;
              font-size: 1.1rem;
          }
          
          /* --------- √âL√àVES --------- */
          .students-box .box-title {
              margin-bottom: 20px;
          }
          .students-list {
              display: grid;
              grid-template-columns: repeat(5, 1fr);
              gap: 25px;
          }
          .student-card {
              text-align: center;
              break-inside: avoid;
          }
          .student-avatar {
              width: 80px;
              height: 80px;
              margin: auto;
              border-radius: 50%;
              border: 2px solid #eee;
              padding: 3px;
          }
          .student-avatar img {
              width: 100%;
              height: 100%;
              border-radius: 50%;
              object-fit: cover;
          }
          .student-name {
              margin-top: 8px;
              font-size: 0.85rem;
              font-weight: 700;
          }
          .no-students {
              color: #888;
          }
          
          /* --------- RESPONSIVE --------- */
          @media (max-width: 768px) {
              .detail-grid {
                  grid-template-columns: 1fr;
              }
              .students-list {
                  grid-template-columns: repeat(3, 1fr);
              }
          }
          
          /* --------- PRINT --------- */
          @media print {
              .detail-grid {
                  break-inside: auto;
              }
              .student-card {
                  break-inside: avoid;
              }
              .students-list {
                  grid-template-columns: repeat(5, 1fr) !important;
              }
          }
      </style>
      
      <!-- =========================
     STATISTIQUES DE LA CLASSE
     ========================= -->
<section class="page stats-page" aria-label="Statistiques de la classe">
    <div class="section-head">
        <div class="marker"></div>
        <h2>Statistiques de la classe {{ classe.nom }}</h2>
    </div>

    <div class="stats-column">

        <!-- Nombre total d'√©l√®ves & r√©partition -->
        <div class="stat-block">
            <div class="muted-note2">Nombre total d'√©l√®ves</div>
            <div class="big">{{ total_eleves }}</div>

            <div class="muted-note2" style="margin-top:8px;">R√©partition par sexe</div>
            <div class="gender-bars">
                <div>
                    <div class="muted-note2">M√¢les</div>
                    <div class="bar">
                        {% if total_eleves > 0 %}
                        <i style="width:{{ pct_males }}%; background:#3b82f6;"></i>
                        {% endif %}
                    </div>
                    <div class="muted-note2">{{ pct_males }}%</div>
                </div>

                <div style="margin-top:12px;">
                    <div class="muted-note2">Femmes</div>
                    <div class="bar">
                        {% if total_eleves > 0 %}
                        <i style="width:{{ pct_females }}%; background:linear-gradient(90deg,#f24 0,#f59 100%);"></i>
                        {% endif %}
                    </div>
                    <div class="muted-note2">{{ pct_females }}%</div>
                </div>
            </div>
        </div>

        <!-- Taux de r√©ussite et √©checs -->
        <div class="stat-block">
            <div class="muted-note2">Taux de r√©ussite</div>
            <div class="big">{{ pourcentage_reussite|floatformat:2 }}%</div>

            <div class="muted-note2" style="margin-top:12px;">R√©ussite vs √âchecs</div>
            <div class="success-fail">
                <div class="pie" title="{{ pourcentage_reussite|floatformat:0 }}% r√©ussite">
                    {{ pourcentage_reussite|floatformat:0 }}%
                </div>

                <div class="numbers">
                    <div class="muted-note2">Nombre r√©ussite</div>
                    <div class="big">{{ nombre_reussites }}</div>

                    <div class="muted-note2" style="margin-top:4px;">Nombre d'√©checs (&lt;50%)</div>
                    <div class="big fail">{{ nombre_echecs }}</div>
                </div>
            </div>
        </div>

        <!-- Performance par p√©riode -->
        <div class="stat-block">
            <div class="muted-note2">Progression par p√©riode</div>
            <div class="bars-column">
                {% for perf in performance_par_periode %}
                    <div style="display:flex; justify-content: space-between; align-items:center;">
                        <div class="muted-note2">{{ perf.periode }}</div>
                        <div class="muted-note2">{{ perf.pourcentage|floatformat:2 }}%</div>
                    </div>

                    <div class="bar">
                        <i style="width:{{ perf.pourcentage }}%; background:#3b82f6;"></i>
                    </div>
                {% endfor %}
            </div>
        </div>

    </div>
</section>

<!-- =========================
     CSS INLINE (pour PDF)
     ========================= -->
<style>
.stats-page {
    padding: 40px 30px;
    box-sizing: border-box;
    background: #fdfdfd;
    color: #1a1a1a;
    page-break-before: always;
}
.stats-page .section-head {
    display: flex;
    align-items: center;
    margin-bottom: 24px;
    break-inside: avoid;
}
.stats-page .section-head .marker {
    width: 6px;
    height: 40px;
    background-color: #1a365d;
    margin-right: 12px;
    border-radius: 3px;
}
.stats-page .section-head h2 {
    font-size: 28px;
    color: #1a365d;
    margin: 0;
}
.stats-column {
    display: flex;
    flex-direction: column;
    gap: 32px;
}
.stat-block {
    break-inside: avoid;
}
.big {
    font-weight: bold;
    font-size: 32px;
    margin: 4px 0;
}
.muted-note2 {
    color: #555;
    font-size: 14px;
    font-style: italic;
}
.gender-bars div {
    margin-top: 8px;
}
.bar {
    background: #e5e7eb;
    height: 12px;
    border-radius: 6px;
    overflow: hidden;
}
.bar i {
    display: block;
    height: 100%;
    transition: width 0.5s ease;
}
.success-fail {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-top: 8px;
}
.pie {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: #3b82f6;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 14px;
}
.numbers .fail {
    color: #e11d48;
}
.bars-column {
    display: flex;
    flex-direction: column;
    gap: 6px;
    margin-top: 8px;
}
</style>
<!-- =========================
     PAGE 8: REMERCIEMENTS
     ========================= -->
     <section class="page thanks-page" aria-label="Remerciements">
    
        <div class="thanks-content">
            
            <div class="thanks-image">
                <div class="image-wrapper"
                     style="background-image:url('{{ default_photo }}');">
                </div>
            </div>
            
            <div class="thanks-text">
                
                <div class="section-head">
                    <div class="marker"></div>
                    <h2>Remerciements</h2>
                </div>
    
                <h3 class="thanks-title">Merci √† tous</h3>
                
                <div class="thanks-message">
                    {% if info.remerciements %}
                        <p>{{ info.remerciements }}</p>
                    {% else %}
                        {# Texte bas√© sur l'information du PDF pour une meilleure coh√©rence #}
                        <p>
                            [cite_start]Nous remercions chaleureusement nos enseignants, parents et partenaires pour leur confiance et leur engagement continu[cite: 86]. [cite_start]Votre soutien nous permet de continuer √† inspirer et former les leaders de demain[cite: 87].
                        </p>
                    {% endif %}
                </div>
                
                <div class="signature">
                    <p>‚Äî La Direction de {{ school.nom }}</p>
                </div>
            </div>
            
        </div>
    </section>
    
    <style>
    /* üîë D√©claration des polices locales (reprises) */
    @font-face {
        font-family: 'Playfair Display';
        src: url('file://{{ base_dir }}/static/fonts/PlayfairDisplay-Bold.ttf') format('truetype');
        font-weight: 700;
    }
    @font-face {
        font-family: 'Lato';
        src: url('file://{{ base_dir }}/static/fonts/Lato-Regular.ttf') format('truetype');
        font-weight: 400;
    }
    @font-face {
        font-family: 'Lato';
        src: url('file://{{ base_dir }}/static/fonts/Lato-Bold.ttf') format('truetype');
        font-weight: 700;
    }
    
    .thanks-page {
        padding: 60px 50px; /* Padding augment√© */
        box-sizing: border-box;
        background: #fcfcfc; /* Fond tr√®s clair */
        color: #1a1a1a;
        page-break-before: always;
        font-family: 'Lato', sans-serif;
    }
    
    .thanks-page .section-head {
        display: flex;
        align-items: center;
        margin-bottom: 20px;
        break-inside: avoid;
        opacity: 0.7; /* Subtil */
    }
    .thanks-page .section-head .marker {
        width: 4px; /* Marqueur plus fin */
        height: 30px;
        background-color: #d4af37; /* Couleur Or */
        margin-right: 12px;
        border-radius: 2px;
    }
    .thanks-page .section-head h2 {
        font-size: 20px;
        color: #333;
        margin: 0;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    
    .thanks-content {
        display: flex;
        gap: 50px; /* Grand √©cart */
        align-items: flex-start; /* Alignement en haut */
    }
    
    /* --- Colonne Image --- */
    .thanks-image {
        width: 40%;
        order: 1; /* Place l'image √† gauche */
    }
    .thanks-image .image-wrapper {
        height: 300px; /* Hauteur plus importante */
        width: 100%;
        background-size: cover;
        background-position: center;
        border-radius: 12px; /* Bords l√©g√®rement arrondis */
        box-shadow: 0 8px 25px rgba(0,0,0,0.2); /* Ombre plus marqu√©e */
        border: 5px solid #fff; /* Bordure blanche pour simuler un cadre */
    }
    
    /* --- Colonne Texte --- */
    .thanks-text {
        flex: 1;
        order: 2; /* Place le texte √† droite */
    }
    
    .thanks-title {
        font-family: 'Playfair Display', serif;
        font-size: 36px; /* Grand titre */
        font-weight: 700;
        color: #1a365d;
        margin-top: 10px;
        margin-bottom: 20px;
    }
    
    .thanks-message p {
        font-size: 17px;
        line-height: 1.6;
        color: #444;
        margin-bottom: 30px;
        border-left: 3px solid #eee; /* Ligne de d√©marcation subtile */
        padding-left: 20px;
        font-style: italic;
    }
    
    .signature p {
        font-size: 16px;
        font-weight: 700;
        color: #1a365d;
        margin: 0;
    }
    
    /* Responsive pour √©viter le chevauchement si le contenu d√©borde */
    @media screen and (max-width: 768px) {
        .thanks-content {
            flex-direction: column;
        }
        .thanks-image, .thanks-text {
            width: 100%;
            order: initial;
        }
        .thanks-image .image-wrapper {
            height: 200px;
        }
    }
    </style>
    {% comment %}  {% endcomment %}




    <!-- =========================
¬† ¬† ¬†PAGE 2: SOMMAIRE
¬† ¬† ¬†========================= -->
<section class="page summary-page" aria-label="Sommaire">
    
    <div class="summary-wrapper">
        
        <!-- Titre de la section -->
        <div class="summary-head">
            <h2 class="magazine-section-title">SOMMAIRE</h2>
            <div class="school-motto">Le souvenir d'une ann√©e exceptionnelle.</div>
        </div>

        <!-- Liste des points (Table des mati√®res) -->
        <div class="summary-grid">
            
            <div class="summary-item item-major">
                <span class="page-number">xx</span>
                <span class="section-title">Pr√©sentation de l'√âcole</span>
                <span class="description">Mission, valeurs et vision de l'√©tablissement.</span>
            </div>
            
            <div class="summary-item">
                <span class="page-number">xx</span>
                <span class="section-title">Le Corps de Direction</span>
                <span class="description">Fondateur, Superviseurs & Comit√© de direction.</span>
            </div>
            
            <div class="summary-item">
                <span class="page-number">xx</span>
                <span class="section-title">Corps Enseignant</span>
                <span class="description">L'√©quipe p√©dagogique d√©di√©e √† votre succ√®s.</span>
            </div>
            
            <div class="summary-item item-major">
                <span class="page-number">xx</span>
                <span class="section-title">L'Album des Classes</span>
                <span class="description">Trombinoscope de la promotion {{ classe.nom|default:"N/A" }}.</span>
            </div>
            
            <div class="summary-item">
                <span class="page-number">xx</span>
                <span class="section-title">Statistiques de l'Ann√©e</span>
                <span class="description">Taux de r√©ussite et progression acad√©mique.</span>
            </div>
            
            <div class="summary-item">
                <span class="page-number">xx</span>
                <span class="section-title">Remerciements</span>
                <span class="description">Un mot de la direction √† la communaut√©.</span>
            </div>

        </div>

    </div>
</section>

<!-- =========================
¬† ¬† ¬† ¬† ¬†CSS INLINE (pour PDF)
¬† ¬† ¬† ¬† ¬†========================= -->
<style>
/* üîë D√©claration des polices locales (reprises) */
@font-face {
    font-family: 'Playfair Display';
    src: url('file://{{ base_dir }}/static/fonts/PlayfairDisplay-Bold.ttf') format('truetype');
    font-weight: 700;
}
@font-face {
    font-family: 'Lato';
    src: url('file://{{ base_dir }}/static/fonts/Lato-Regular.ttf') format('truetype');
    font-weight: 400;
}
@font-face {
    font-family: 'Lato';
    src: url('file://{{ base_dir }}/static/fonts/Lato-Bold.ttf') format('truetype');
    font-weight: 700;
}

.summary-page {
    padding: 60px 80px; /* Grande marge pour un aspect premium */
    box-sizing: border-box;
    background: #fff;
    color: #1a1a1a;
    page-break-before: always;
    font-family: 'Lato', sans-serif;
}

.summary-wrapper {
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
}

/* --- T√™te de section --- */
.summary-head {
    margin-bottom: 50px;
    padding-bottom: 10px;
    border-bottom: 2px solid #1a365d; /* Ligne de s√©paration forte */
}

.magazine-section-title {
    font-family: 'Playfair Display', serif;
    font-size: 48px; /* Tr√®s grand titre */
    font-weight: 700;
    color: #1a365d; /* Bleu marine */
    margin: 0;
    line-height: 1;
}

.school-motto {
    font-size: 16px;
    color: #444;
    margin-top: 10px;
    font-style: italic;
}

/* --- Grille du Sommaire --- */
.summary-grid {
    display: grid;
    gap: 30px;
    padding-top: 20px;
}

.summary-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px dashed #ddd; /* S√©paration subtile */
    padding-bottom: 15px;
}

/* Accentuation des sections majeures */
.summary-item.item-major {
    border-bottom: 2px solid #1a365d; /* Ligne forte pour les titres majeurs */
    padding-bottom: 20px;
    margin-top: 15px;
}

.summary-item .page-number {
    font-family: 'Playfair Display', serif;
    font-size: 32px; /* Gros num√©ro de page */
    font-weight: 700;
    color: #d4af37; /* Couleur Or */
    flex-shrink: 0;
    margin-right: 30px;
}

.summary-item .section-title {
    flex-grow: 1;
    text-align: left;
    font-size: 20px;
    font-weight: 700;
    color: #1a365d;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.summary-item .description {
    flex-shrink: 0;
    width: 35%; /* Laisser de la place pour la description */
    text-align: right;
    font-size: 14px;
    color: #777;
    font-style: italic;
    margin-left: 20px;
}

.summary-item.item-major .page-number {
    font-size: 40px; 
}
.summary-item.item-major .section-title {
    font-size: 24px;
    color: #1a365d;
}
</style>
{% comment %}  {% endcomment %}
    <section class="page verso-page" aria-label="Verso">
        <div class="verso" style="background-image:url('{{ default_photo }}');">
            
            <div class="verso-overlay"></div>
            
            <div class="verso-center">
                
                <div class="verso-logo">
                    {% if info and info.logo %}
                        <img src="{{ info.logo.url }}" alt="Logo √©cole">
                    {% endif %}
                </div>
                
                <h1 class="verso-title">{{ school.nom }}</h1>
                
                <div class="verso-year">
                    SOUVENIR SCOLAIRE ‚Äî Ann√©e {{ info.annee_scolaire }}
                </div>
    
                {% if info.slogan %}
                    <div class="verso-slogan">¬´ {{ info.slogan }} ¬ª</div>
                {% else %}
                    <div class="verso-slogan">¬´ Savoir, Servir, Grandir ¬ª</div>
                {% endif %}
    
            </div>
            
            <div class="verso-footer">
                <span class="production-text">PRODUCTION DE SCHOOL NOTE</span>
                <span class="website-link">schoolnote.com</span>
            </div>
        </div>
    </section>
    
    <style>
    /* üîë D√©claration des polices locales (reprises de la page 1) */
    @font-face {
        font-family: 'Playfair Display';
        src: url('file://{{ base_dir }}/static/fonts/PlayfairDisplay-Bold.ttf') format('truetype');
        font-weight: 700;
    }
    @font-face {
        font-family: 'Lato';
        src: url('file://{{ base_dir }}/static/fonts/Lato-Regular.ttf') format('truetype');
        font-weight: 400;
    }
    @font-face {
        font-family: 'Lato';
        src: url('file://{{ base_dir }}/static/fonts/Lato-Bold.ttf') format('truetype');
        font-weight: 700;
    }
    
    .verso-page {
        position: relative;
        width: 100%;
        height: 100%;
        page-break-before: always;
        font-family: 'Lato', sans-serif;
    }
    
    .verso {
        position: relative;
        width: 100%;
        height: 100%;
        background-size: cover;
        background-position: center;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        padding: 0; /* Padding retir√© du parent pour le plein √©cran */
        box-sizing: border-box;
    }
    
    /* NOUVEAU: Overlay pour le contraste */
    .verso-overlay {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background: rgba(0, 0, 0, 0.75); /* Noir semi-transparent tr√®s sombre */
        z-index: 1;
    }
    
    /* Conteneur principal au centre */
    .verso-center {
        position: relative;
        z-index: 5;
        color: #fff;
        padding: 40px;
    }
    
    /* Logo (centr√©) */
    .verso-logo {
        margin-bottom: 20px;
    }
    
    .verso-logo img {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        object-fit: cover;
        border: 4px solid #d4af37; /* Bordure Or */
        box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    }
    
    /* Nom de l'√©cole */
    .verso-title {
        font-family: 'Playfair Display', serif;
        font-size: 3.5rem; /* Tr√®s grand pour l'impact */
        font-weight: 700;
        margin: 0;
        line-height: 1.1;
        text-shadow: 1px 1px 4px rgba(0,0,0,0.8);
        color: #fff;
        text-transform: uppercase;
        letter-spacing: 2px;
    }
    
    /* Ann√©e scolaire */
    .verso-year {
        font-size: 1.2rem;
        margin-top: 15px;
        color: #ccc;
        font-weight: 400;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    
    /* Slogan */
    .verso-slogan {
        font-family: 'Playfair Display', serif;
        font-size: 1.8rem;
        font-style: italic;
        margin-top: 40px;
        color: #d4af37; /* Couleur Or */
        font-weight: 700;
        text-shadow: 0 1px 3px rgba(0,0,0,0.6);
    }
    
    /* Pied de page */
    .verso-footer {
        position: absolute;
        bottom: 30px;
        width: 100%;
        text-align: center;
        font-size: 0.9rem;
        z-index: 5;
        color: #999;
        display: flex;
        justify-content: center;
        gap: 20px;
        text-shadow: 0 1px 2px rgba(0,0,0,0.8);
    }
    
    .verso-footer .production-text {
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    
    .verso-footer .website-link {
        color: #d4af37; /* Or pour le lien */
        font-weight: 700;
        text-decoration: none;
    }
    </style>
</body>
</html> 